<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>

</head>

<body>
    
    <style>
        #centro{
            background-position: center;
            align-items: center;
            justify-content: center;

        }
    </style>
    <h1 class="centro">Crud Restaurante</h1>

    <form id="crud-form" class="centro">
        <label for="nombre">Nombre</label>
        <input type="text" id="nombre">
        <br>
        <br>
        <label for="descripcion">Descripción:</label>
        <input type="text" id="descripcion" required>
        <br>
        <br>
        <label for="precio">Precio:</label>
        <input type="number" id="precio" step="0.01" required>
        <br>
        <br>
        <button  type="button" onclick="crearRegistro()">CREAR</button>
    
    </form>
    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.0/firebase-app.js";
        import{getDatabase, ref, push, onValue, remove }from "https://www.gstatic.com/firebasejs/10.7.0/firebase-database.js";
        // TODO: Add SDKs for Firebase products that you want to use
        // https://firebase.google.com/docs/web/setup#available-libraries
      
        // Your web app's Firebase configuration
        const firebaseConfig = {
          apiKey: "AIzaSyDMBpqzEAuwjWvWo0LdwwT583_rj6YCWOs",
          authDomain: "prueba-pablo-a99be.firebaseapp.com",
          databaseURL: "https://prueba-pablo-a99be-default-rtdb.firebaseio.com",
          projectId: "prueba-pablo-a99be",
          storageBucket: "prueba-pablo-a99be.appspot.com",
          messagingSenderId: "741796966635",
          appId: "1:741796966635:web:52bd01277cf5543ff58eae"
        };
      
        // Initialize Firebase
        
        firebase.initializeApp(firebaseConfig);

        // Referencia a la colección de platos
        var platosRef = firebase.database().ref('platos');

        // Función para agregar un plato
        function agregarPlato() {
        var nombre = document.getElementById('nombre').value;
        var descripcion = document.getElementById('descripcion').value;
        var precio = parseFloat(document.getElementById('precio').value);

        // Validación básica
        if (nombre && descripcion && !isNaN(precio)) {
            platosRef.push({
            nombre: nombre,
            descripcion: descripcion,
            precio: precio
            });

            // Limpiar el formulario después de agregar
            document.getElementById('nombre').value = '';
            document.getElementById('descripcion').value = '';
            document.getElementById('precio').value = '';
        } else {
            alert('Por favor, completa todos los campos correctamente.');
        }
        }

        // Función para mostrar los platos
        function mostrarPlatos(platos) {
        var platosList = document.getElementById('platosList');
        platosList.innerHTML = '';

        for (var key in platos) {
            if (platos.hasOwnProperty(key)) {
            var plato = platos[key];

            var platoDiv = document.createElement('div');
            platoDiv.innerHTML = '<strong>' + plato.nombre + '</strong>: ' +
                                plato.descripcion + ' - $' + plato.precio.toFixed(2);

            var editarButton = document.createElement('button');
            editarButton.innerHTML = 'Editar';
            editarButton.onclick = function() {
                // Agrega la lógica para editar el plato (puedes abrir un modal, por ejemplo)
                console.log('Editar plato:', key);
            };

            var eliminarButton = document.createElement('button');
            eliminarButton.innerHTML = 'Eliminar';
            eliminarButton.onclick = function() {
                eliminarPlato(key);
            };

            platoDiv.appendChild(editarButton);
            platoDiv.appendChild(eliminarButton);
            platosList.appendChild(platoDiv);
            }
        }
        }

        // Función para eliminar un plato
        function eliminarPlato(platoId) {
        if (confirm('¿Estás seguro de que quieres eliminar este plato?')) {
            platosRef.child(platoId).remove();
        }
        }

        // Escucha los cambios en la base de datos y actualiza la interfaz de usuario
        platosRef.on('value', function(snapshot) {
        var platos = snapshot.val();
        mostrarPlatos(platos);
        });
        
        
    </script>



</body>
</html>